<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Instagram Follower Card</title>

<!-- Odometer CSS for the animated count -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/odometer.js/0.4.8/odometer-theme-default.min.css" rel="stylesheet" />

<style>
  <iframe height="80px" width="300px" frameborder="0" src="https://livecounts.nl/instagram-realtime/embed/?u=hildekeyf" style="border: 0; width:300px; height:80px; background-color: #FFF;"></iframe>
  body {
    background: url('https://raw.githubusercontent.com/Ismailcny/instagram-counter-demo/main/fb111c30-497e-4649-8567-08545618d707.jpg') no-repeat center center fixed;
    background-size: cover;
    font-family: Arial, sans-serif;
    color: white;
    text-align: center;
    padding: 60px 20px;
  }
  .profile-card {
    background: rgba(0, 0, 0, 0.6);
    padding: 25px;
    border-radius: 15px;
    width: 320px;
    margin: 0 auto;
  }
  .profile-picture-container {
    margin-bottom: 15px;
  }
  .profile-picture-modern {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 3px solid white;
  }
  .username {
    font-size: 28px;
    margin: 0;
  }
  .engagement-rate {
    font-size: 14px;
    color: #ccc;
    margin: 5px 0 15px 0;
  }
  .followers-odometer {
    font-size: 48px;
    font-weight: bold;
  }
  h5 {
    margin: 15px 0 5px 0;
  }
  .follower-growth {
    color: #4caf50; /* green for positive growth */
  }
  .real-time-status {
    font-size: 13px;
    margin-top: 10px;
    font-style: italic;
  }
  .last-refreshed {
    font-size: 12px;
    margin-top: 3px;
    color: #999;
  }
  .progress-container {
    background: #333;
    border-radius: 8px;
    height: 12px;
    position: relative;
    margin-top: 15px;
  }
  .progress-bar {
    background: #4caf50;
    height: 100%;
    border-radius: 8px;
    width: 0%;
    transition: width 1s ease;
  }
  .progress-label {
    position: absolute;
    right: 10px;
    top: -22px;
    font-size: 12px;
    color: #fff;
  }
</style>
</head>
<body>

<div class="profile-card">
  <div class="profile-picture-container">
    <img class="profile-picture-modern" src="https://scontent-fra5-1.cdninstagram.com/v/t51.2885-19/495493122_17913514821099074_8120261237118233225_n.jpg" alt="Instagram Profile Picture" />
  </div>
  <div class="text-center">
    <h2 class="username">Hilde Keyf</h2>
    <p class="engagement-rate">Engagement Rate: 0.00%</p>
    <div class="main-odometer followers-odometer odometer" aria-label="Follower Count" id="followerCount">0</div>
    <h5>Followers <span class="follower-growth">+0/day</span></h5>
    <p class="real-time-status"><span class="pulse-dot"></span> Tracking in real-time</p>
    <p class="last-refreshed" id="lastUpdated">Last updated just now</p>
    <!-- Enhanced Goal Progress -->
    <div class="mt-3">
      <h6><span class="goal-odometer odometer" id="goalOdometer">0</span> followers until next milestone</h6>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar" style="width: 0%;"></div>
        <div class="progress-label" id="progressLabel">0%</div>
      </div>
    </div>
  </div>
</div>

<!-- Odometer JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/odometer.js/0.4.8/odometer.min.js"></script>

<script>
  const followerCountElem = document.getElementById('followerCount');
  const goalOdometerElem = document.getElementById('goalOdometer');
  const progressBar = document.getElementById('progressBar');
  const progressLabel = document.getElementById('progressLabel');
  const lastUpdated = document.getElementById('lastUpdated');
  const followerGrowthElem = document.querySelector('.follower-growth');

  let lastFollowers = 0;
  const goalMilestone = 1600; // Example milestone

  // Function to fetch followers count (you need to connect to your own backend or a JSON)
  async function fetchFollowers() {
    try {
      // Example: fetch from your GitHub raw JSON or backend API
      const response = await fetch('https://raw.githubusercontent.com/Ismailcny/instagram-counter-demo/7a7a1c9d0a5d227f24acc57473f5ce7c5ff79088/data/followers.json');
      const data = await response.json();

      return data.followers_count || 0;
    } catch (error) {
      console.error('Error fetching followers:', error);
      return lastFollowers; // fallback to last count
    }
  }

  async function updateFollowers() {
    const currentFollowers = await fetchFollowers();

    // Animate odometer if followers changed
    if (currentFollowers !== lastFollowers) {
      followerCountElem.innerHTML = currentFollowers;
      lastFollowers = currentFollowers;

      // Update progress bar towards milestone
      const progressPercent = Math.min(100, ((currentFollowers / goalMilestone) * 100).toFixed(1));
      progressBar.style.width = progressPercent + '%';
      progressLabel.textContent = progressPercent + '%';

      goalOdometerElem.innerHTML = Math.max(0, goalMilestone - currentFollowers);

      // Example growth display (you can improve this)
      const growth = currentFollowers - lastFollowers;
      followerGrowthElem.textContent = (growth > 0 ? '+' : '') + growth + '/day';

      // Update last updated time
      lastUpdated.textContent = 'Last updated: ' + new Date().toLocaleTimeString();
    }
  }

  // Initial update
  updateFollowers();

  // Update every 50 seconds
  setInterval(updateFollowers, 50000);

</script>

</body>
</html>
